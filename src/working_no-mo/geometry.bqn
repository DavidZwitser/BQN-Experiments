âŸ¨raymath, color, window, draw, rayffi, kâ‡keyâŸ©â†râ†â€¢Import "../../raylib.bqn"
âŸ¨IsDownâŸ©â†k

wâ€¿h â† size â† 0â€¿0

_setup â† {ğ•¨ğ”½_ğ•£ğ•©:
	meshes â† rayffi.LoadModelFromMeshÂ¨ âŸ¨
		rayffi.GenMeshPlane 10â€¿10â€¿3â€¿3
		rayffi.GenMeshCube 2â€¿4â€¿2
	âŸ©
	rayffi.SetConfigFlags window.configFlags.fullscreen_mode
	font â† r.font.LoadBQN 50
	wâ€¿h â†© size â†© window.GetSize @

	pos â† 0â€¿0â€¿Â¯6 raymath.MPËœ raymath.MatrixRotateX 20
	camera â† âŸ¨ 0â€¿0â€¿Â¯6, 0â€¿0â€¿0,  0â€¿1â€¿0, 60,  0âŸ©

	meshesâ€¿font ğ”½ camera
	rayffi.UnloadModelÂ¨ meshes
}

last â† 0â€¿0
sensitivity â† 6
PerFrame â† {meshesâ€¿fontğ•Šcamera:
	xâ€¿y â† mouse â† r.mouse.GetPos @
	scroll â† r.mouse.WheelMoved @
	dxâ€¿dy â† mouse - last
	last â†© mouse
	md â† rayffi.IsMouseButtonDown r.mouse.button.left # mouse down

	RotateX â† {ğ•© raymath.MPËœ raymath.MatrixRotateY mdâˆ§(dxÃ·w),Ã—sensitivity }
	RotateY â† {ğ•© raymath.MPËœ raymath.MatrixRotateX mdâˆ§((-dy)Ã·h)Ã—sensitivity }

	MoveCamera â† (RotateX RotateY) âŒ¾ âŠ‘

	{ğ•¤
		rayffi.BeginMode3D camera
		(rayffi.DrawModelâŸ¨0â€¿0â€¿0, 1, color.whiteâŸ©âˆ¾Ëœ<)Â¨ meshes
      	rayffi.DrawGrid 10â€¿1

		rayffi.EndMode3DâŸ¨âŸ©
		rayffi.DrawFPS 10â€¿10

	} draw._withCanvas_ color.black @

	MoveCamera camera
}

Game â† PerFrame â€¢_While_ (Â¬window.ShouldClose) _setup
Game window._openAs "raylib [shaders] example - basic lighting"
