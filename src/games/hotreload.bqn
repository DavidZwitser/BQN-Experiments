# Todo:
# give information on when this updates (timestamp of last import?)
# also give info for when import failed
# (idea, have hotTest.bqn import "global" values that hotreload.bqn mutates)

mainFilename â† "astroids.bqn"
lastMain â† main â† â€¢Import mainFilename
mainText â† â€¢file.Bytes mainFilename
closed â† 0
lastUpdate â† â€¢Monotime@

â€¢rand.Random 5

Revert â† {ğ•¤
  main â†© lastmain
}


WasNotClosed â† {
  closed âˆ¨ â†© main.Close ğ•©
  Â¬closed
}

# how many iterations till next check
iter â† 20

{ğ•¨ğ”½_ğ•£ğ•©: ğ•©}
{ğ•¨ğ”½_ğ•£ğ•: }
{ğ•¤: }

{ğ•Šinput:
  {ğ•¤
    main @âŠ¸â€¢ImportâŠâŠ£â†© mainFilename # catches syntax bugs
    mainText â†© ğ•©
  }âŸ(mainTextâŠ¸â‰¢)â€¢file.Bytes mainFilename
  out â† main.PerFrameâŸWasNotClosedâŸiterâŠRevert input
  lastMain â†© main
  out
} â€¢_While_ (WasNotClosedâŠRevert) main._start @
